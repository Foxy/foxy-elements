import dedent from 'dedent';
import { html } from 'lit-html';
import {
  Subtitle,
  ArgsTable,
  Story,
  Canvas,
  Meta,
} from '@web/storybook-prebuilt/addon-docs/blocks.js';
import './index.ts';

export const settings = JSON.stringify({
  _links: {
    self: {
      href: 'https://demo.foxycart.com/s/customer/customer_portal_settings',
      title: 'Store Customer Portal Settings',
    },
  },
  session_lifespan_in_minutes: 90,
  allowed_origins: ['https://themancan.com'],
  subscriptions: {
    allow_frequency_modification: [
      {
        jsonata_query: '$contains(frequency, "m")',
        values: ['.5m', '1m', '2m'],
      },
    ],
    allow_next_date_modification: [
      {
        allowed_days: {
          days: [1, 3, 5],
          type: 'day',
        },
        disallowed_dates: ['2021-09-02', '2021-09-03', '2021-09-01'],
        jsonata_query: '$contains(frequency, "m")',
        max: '2y',
        min: '1w',
      },
    ],
  },
  sso: true,
  date_created: '2020-04-13T08:44:09-0700',
  date_modified: '2020-04-13T08:46:03-0700',
});

<Meta title="Forms / SubscriptionForm" />

# SubscriptionForm

<Subtitle>Form element for creating or editing subscriptions</Subtitle>

<Canvas
  mdxSource={dedent`
    <foxy-subscription-form
      parent="https://demo.foxycart.com/s/admin/stores/0/subscriptions"
      href="https://demo.foxycart.com/s/admin/subscriptions/0?zoom=last_transaction,transaction_template:items"
    >
    </foxy-subscription-form>
  `}
  isExpanded
>
  <Story name="Playground">
    {() =>
      html`
        <foxy-subscription-form
          parent="https://demo.foxycart.com/s/admin/stores/0/subscriptions"
          href="https://demo.foxycart.com/s/admin/subscriptions/0?zoom=last_transaction,transaction_template:items"
          class="container-narrow"
        >
        </foxy-subscription-form>
      `
    }
  </Story>
</Canvas>

## Reference

<ArgsTable of="foxy-subscription-form" />

### hAPI

This element supports the following resources: [subscription](https://api.foxycart.com/rels/subscription).

### i18next

This element supports the following namespaces: `subscription-form`, `shared`.

### Theming

Our elements are built with Vaadin Lumo theme and therefore share the list of CSS Custom Properties with it. You can find the latest documentation and theme editor on [demo.vaadin.com](https://demo.vaadin.com/lumo-editor/).

<Story name="State: idle.template" parameters={{ docs: { disable: true } }}>
  {() =>
    html`
      <foxy-subscription-form
        parent="https://demo.foxycart.com/s/admin/stores/0/subscriptions"
        class="container-narrow"
      >
      </foxy-subscription-form>
    `
  }
</Story>

<Story name="State: idle.snapshot" parameters={{ docs: { disable: true } }}>
  {() =>
    html`
      <foxy-subscription-form
        parent="https://demo.foxycart.com/s/admin/stores/0/subscriptions"
        href="https://demo.foxycart.com/s/admin/subscriptions/0?zoom=last_transaction,transaction_template:items"
        class="container-narrow"
      >
      </foxy-subscription-form>
    `
  }
</Story>

<Story name="State: idle.snapshot (with settings)" parameters={{ docs: { disable: true } }}>
  {() =>
    html`
      <foxy-subscription-form
        parent="https://demo.foxycart.com/s/admin/stores/0/subscriptions"
        href="https://demo.foxycart.com/s/admin/subscriptions/0?zoom=last_transaction,transaction_template:items"
        class="container-narrow"
        settings=${settings}
      >
      </foxy-subscription-form>
    `
  }
</Story>

<Story name="State: busy" parameters={{ docs: { disable: true } }}>
  {() =>
    html`
      <foxy-subscription-form
        parent="https://demo.foxycart.com/s/admin/stores/0/subscriptions"
        href="https://demo.foxycart.com/s/admin/sleep"
        class="container-narrow"
      >
      </foxy-subscription-form>
    `
  }
</Story>

<Story name="State: fail" parameters={{ docs: { disable: true } }}>
  {() =>
    html`
      <foxy-subscription-form
        parent="https://demo.foxycart.com/s/admin/stores/0/subscriptions"
        href="https://demo.foxycart.com/s/admin/not-found"
        class="container-narrow"
      >
      </foxy-subscription-form>
    `
  }
</Story>
