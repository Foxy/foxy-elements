import { QuickOrder } from '/dist/elements/public/QuickOrder/QuickOrder.js';
import { ProductItem } from '/dist/elements/public/QuickOrder/ProductItem.js';
import { Meta, html,  Story, Preview  } from '@open-wc/demoing-storybook';
window.customElements.define('foxy-order-form', QuickOrder);
window.customElements.define('foxy-item', ProductItem);

<Meta
 title="Quick Order"
 parameters={{ component: 'quick-order'}}
/>

# Quick Order

Quick Order Form allows users to place an order based on a list of products.

Users can customize the order by editing the product list and the subscription settings.

You may feed the products to the Form using either:

- using the custom tag `product-item`;
- the products parameter;

### Product Items

Using the **product-item** approach gives you full control over your form's markup, provided `product-items` are not created in an element's Shadow DOM.
```html
<foxy-order-form>
  <foxy-item></foxy-item>
  <foxy-item></foxy-item>
  <foxy-item></foxy-item>
  <foxy-item></foxy-item>
</foxy-order-form>
```
The downside of this approach is that you have little control of custom markup you may want to add to your form.

### Products Array

Using the **products parameter** is easier to implement if you have a products
list in memory. It allows you to use something as simple as:

```html
<foxy-order-form products='[{...},{...},{...}]'>
</foxy-order-form>
```

The downside of this approach is that you have little control of custom markup you may want to add to your form.

## Using custom tag for the product

By adding `foxy-items` to your `foxy-order-form` your products will be properly
added to the order. The form will find the products and create the necessary
fields.

You can use any markup you wish. You may place your products in cards, lists,
articles sections and even tables, if that's what you like. Foxy-order-form will
find your products (unless they are in the shadow dom of other elements).

<Preview>
  <Story name="Using product items">
    {html`
    <foxy-order-form>
      <style>
      .dietary-food {
        font-weight: 100;
        border: solid thin silver;
        border-radius: 6px;
        padding: 1em;
        display: flex;
      }
      .dietary-food img {
        height: 4em
      }
      </style>
      <h2>diet food</h2>
      <section class="dietary-food" >
        <foxy-item name="pup dog food" price="59.99"
          image="https://www.foxy.io/merchants/shopping-cart-full.svg">
          high quality nutritious food for you pet
        </foxy-item>
        <foxy-item name="pup dog rich food" price="69.99"
          image="https://www.foxy.io/merchants/shopping-cart-full.svg" >
          Delicious!
        </foxy-item>
      </section>
      <h2>Special item</h2>
      <foxy-item
        name="pup dog food"
        price="69.99"
        image="https://www.foxy.io/merchants/shopping-cart-full.svg">
        And a special bonus for you
      </foxy-item>
      </section>
    </foxy-order-form>
    `}
  </Story>
</Preview>

### Setting up subscriptions

You can configure subscriptions using the subscription product options, as outlined here:
https://wiki.foxycart.com/v/2.0/cheat_sheet#subscription_product_options

Please, note that the `sub_frequency` is required.

More information on subscriptions can be found here: https://wiki.foxycart.com/v/2.0/cheat_sheet#subscription_product_options

<Preview>
  <Story name="Product with subscription" >
    {html`
    <foxy-order-form frequencyOptions='["1d", "1w", ".5m", "1m"]'>
      <foxy-item
        name="Pup Dog Food"
        price="69.99"
        code="abc123"
        image="https://www.foxy.io/merchants/shopping-cart-full.svg"
        sub_frequency="1m"
        nutritional_facts="nutritional facts"
        >
        High quality nutritious food for you pet
      </foxy-item>
    </foxy-order-form>
    `}
  </Story>
</Preview>

### Grouping products using markup

You don't need to do any extra work to allow for a multi-product checkout.

The `<foxy-item>` component will automatically add ids to the relevant inputs in order to allow for multiple products in a single checkout.

You can still use your own ids. `<foxy-item>` will use incremental ids, greater than the last one used.
Please note that there cannot be two `<foxy-item>` in the same page with the same `id`.

## Using an array of products

You may use an array of product objects to feed the form.
In this scenario you loose some for the product tags will be created for you one next to the other.
You can still customize their look and feel, but you won't be able to build your markup as you wish.

<Preview>
  <Story name="Using an Array of products">
    {html`
    <foxy-order-form
   frequencyOptions='["1d", "1w", ".5m", "1m"]'
    products='[{"name":"Cub Puppy","price":"75.95"},{"name":"Bird Dog","price":"64.95"}]'>
    </foxy-order-form>
    `}
  </Story>
</Preview>

## Adding Child products

<Preview>
  <Story name="Child Products">
    {html`
	<foxy-order-form>
	      <h2>diet food</h2>
	      <section class="dietary-food" >
          <foxy-item name="Food Pack" price="0.00" 
            image="https://www.foxy.io/merchants/shopping-cart-full.svg">
            <foxy-item name="pup dog rich food" price="69.99"
              image="https://www.foxy.io/merchants/shopping-cart-full.svg"
              quantity_min="1"
              >
              Delicious!
            </foxy-item>
            <foxy-item name="pup dog rich food" price="69.99"
              image="https://www.foxy.io/merchants/shopping-cart-full.svg" 
              quantity_min="1"
              >
              Delicious!
            </foxy-item>
          </foxy-item>
	      </section>
    </foxy-order-form>    
    `}
  </Story>
</Preview>


## Adding Child products using a product array

You can use the `children` field a product in the product array to add children to a product.

<Preview>
  <Story name="Child products with a JS object">
    {html`
    <foxy-order-form
    products='[ { "name":"Cub Puppy", "price":"75.95" }, { "name":"Bird Dog", "price":"64.95", "children":[ { "name": "Tiny food", "price": "10.00" }, { "name": "Not so tiny food", "price": "8.00" } ] }]'>
    </foxy-order-form>
    `}
  </Story>
</Preview>


### Start and end dates

Subscription settings are defined for the form, not individual products.

Start and end dates must follow the pattern described in FoxyCart documentation:
https://wiki.foxycart.com/v/2.0/products#subscription_product_options

You may set specific dates with the format `YYYYMMDD`, or relative dates using a number with a letter (d for day, w for week, m for month and y for year) appended to it.
Check out the documentation for more details.

<Preview>
  <Story name="Start and End Dates" >
    {html`
    <foxy-order-form frequencyOptions='["1d", "1w", ".5m", "1m"]' sub_startdate="20200505" sub_enddate="20210505" >
      <foxy-item
        name="Pup Dog Food"
        price="69.99"
        sub_frequency="1m"
        >
        High quality nutritious food for you pet
      </foxy-item>
    </foxy-order-form>
    `}
  </Story>
</Preview>
