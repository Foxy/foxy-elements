import { QuickOrder } from '/dist/elements/public/QuickOrder/QuickOrder.js';
import { ProductItem } from '/dist/elements/public/QuickOrder/ProductItem.js';
import { Meta, html,  Story, Preview  } from '@open-wc/demoing-storybook';
window.customElements.define('foxy-order-form', QuickOrder);
window.customElements.define('foxy-item', ProductItem);

<Meta
 title="Quick Order"
 parameters={{ component: 'quick-order'}}
/>

# Quick Order Form

Quick Order Form provides a straighforward way to create an e-commerce form to add products to a cart.

You simply feed your form with the products and it will take care of the rest for you.

You may feed the products to the Form using either:

- using the custom tag `product-item`;
- the products parameter;

### Product Items

Using the **product-item** approach gives you full control over your form's markup.
This approach allow you to create your form writing your HTML in readable way.

```html
<foxy-order-form>
  <foxy-item></foxy-item>
  <foxy-item></foxy-item>
  <foxy-item></foxy-item>
  <foxy-item></foxy-item>
</foxy-order-form>
```

You can use your favorite template engine to provide the form and products their attributes.

### Products Array

If you are fetching your products from a server as a JSON object, you can feed your form using the
**products parameter**.
This approach allows you to use something as simple as:

```html
<foxy-order-form products='[{...},{...},{...}]'>
</foxy-order-form>
```

Please, note that the `products` value must be valid JSON.

The downside of this approach is that you have little control of custom markup you may want to add to your form.

## Basics of a Product

A product must have a name and a price.
All products will have a `data-product` attribute that allow the form to identify it as a product.

Foxy Cart handles both basic and advanced features and many of them are accessible by setting products parameters.

Here are some of the attributes you can use:

|Attribute| Description| Example |
|---------|---------|---------|
|image|Shows a thumbnail of this image in the cart.| `<foxy-item image="http://mysite/myimage.png"></foxy-item>`|
|quantity_max|Maximum quantity that should be allowed per product, per cart.|`<foxy-item quantity_max="5"></foxy-item>`|
|weight|Product's per-product weight, used for shipping rate requests.|`<foxy-item weight="3"></foxy-item>`|
|category|Category identifier for the product.|`<foxy-item category="food"></foxy-item>`|

It pays off to learn more about the product and what you can do with it. Please, vist the [Product's parameters page](https://wiki.foxycart.com/v/2.0/products#a_complete_list_of_product_parameters) to learn more.

## Usage

### Using custom tag for the product

By adding `foxy-items` to your `foxy-order-form` your products will be properly added to the order. The form will find the products and create the propper submission.

You can use any markup you wish, making the form unique to your store and even easily adding your own functionality to it.

You may place your products in cards, lists, articles sections and even tables if you with.

Foxy-order-form will find your products and of course leave your tags alone.
You can use custom elements, but `foxy-order-form` will not find them if they are in a Shadow DOM.

<Preview>
  <Story name="Using product items">
    {html`
    <foxy-order-form currency="usd">
      <style>
      .dietary-food {
        font-weight: 100;
        border: solid thin silver;
        border-radius: 6px;
        padding: 1em;
        display: flex;
        margin-bottom: 1em;
        background: #fafafa;
      }
      .dietary-food img {
        height: 4em
      }
      table {
        margin: 1em;
      }
      table td {
        border: solid thin silver;
        border-collapse: collapse;
        padding: 0.5em;
      }
      </style>
      <h2>diet food</h2>
      <section class="dietary-food" >
        <foxy-item name="pup dog food" price="59.99"
          image="https://www.foxy.io/merchants/shopping-cart-full.svg">
          high quality nutritious food for you pet
        </foxy-item>
        <foxy-item name="pup dog rich food" price="69.99"
          image="https://www.foxy.io/merchants/shopping-cart-full.svg" >
          Delicious!
        </foxy-item>
      </section>
      <h2>Special item</h2>
      <foxy-item
        name="pup dog food"
        price="69.99"
        image="https://www.foxy.io/merchants/shopping-cart-full.svg">
        <section style="display: flex">
          <p>This incredible product was developed by dedicated nutrition experts, building upon the most advanced research</p>
          <table>
            <tr><td>Easily digested</td><td>✓</td></tr>
            <tr><td>Perfectly balenced</td><td>✓</td></tr>
            <tr><td>Environmentaly responsible</td><td>✓</td></tr>
          </table>
        </section>
      </foxy-item>
      </section>
    </foxy-order-form>
    `}
  </Story>
</Preview>

### Setting up subscriptions

To offer a subscription option to your clients you need to provide the subscription options to your clients.

You can configure subscriptions using the subscription product options, as outlined at [https://wiki.foxycart.com/v/2.0/cheat_sheet#subscription_product_options](Subscription Product Options).

<Preview>
  <Story name="Product with subscription" >
    {html`
    <foxy-order-form currency="usd"
                     frequencyOptions='["1d", "1w", ".5m", "1m"]'>
      <foxy-item
        name="Pup Dog Food"
        price="69.99"
        image="https://www.foxy.io/merchants/shopping-cart-full.svg"
        >
      </foxy-item>
    </foxy-order-form>
    `}
  </Story>
</Preview>

### Grouping products using markup

You don't need to do any extra work to allow for a multi-product checkout.

The `<foxy-item>` component will automatically add ids to the relevant inputs in order to allow for multiple products in a single checkout.

You can still use your own ids. `<foxy-item>` will use incremental ids, greater than the last one used.
Please note that there cannot be two `<foxy-item>` in the same page with the same `id`.

## Using an array of products

You may use an array of product objects to feed the form.
In this scenario you loose some for the product tags will be created for you one next to the other.
You can still customize their look and feel, but you won't be able to build your markup as you wish.

<Preview>
  <Story name="Using an Array of products">
    {html`
    <foxy-order-form
		  frequencyOptions='["1d", "1w", ".5m", "1m"]'
	    products='[{"name":"Cub Puppy","price":"75.95"},{"name":"Bird Dog","price":"64.95"}]'
      currency="usd"
      >
    </foxy-order-form>
    `}
  </Story>
</Preview>

## Adding Child products

Child products allow you to bundle a set of products together. You can achieve this by nesting `foxy-item` custom tags.

<Preview>
  <Story name="Child Products">
    {html`
	<foxy-order-form
      currency="usd"
  >
	      <h2>diet food</h2>
	      <section class="dietary-food" >
          <foxy-item name="Food Pack" price="0.00" image="https://www.foxy.io/merchants/shopping-cart-full.svg">
            <foxy-item name="pup dog rich food" price="69.99" image="https://www.foxy.io/merchants/shopping-cart-full.svg" > </foxy-item>
            <foxy-item name="pup dog rich food" price="69.99" image="https://www.foxy.io/merchants/shopping-cart-full.svg"> </foxy-item>
          </foxy-item>
	      </section>
    </foxy-order-form>
    `}
  </Story>
</Preview>

## Adding Child products using a product array

You can also use the `children` field of a product in the product array to add children to a product.

<Preview>
  <Story name="Child products with a JS Array">
    {html`
    <foxy-order-form
      currency="usd"
	    products='[
		    {
			    "name":"Cub Puppy",
			    "price":"75.95"
			    },
		    {
			    "name":"Bird Dog",
			    "price":"64.95",
			    "children":[
				    {
					    "name":"Tiny food",
					    "price":"10.00"
				    },
				    {
					    "name":"Not so tiny food",
					    "price":"8.00"
				    }
			    ]
		    }]'>
    </foxy-order-form>
    `}
  </Story>
</Preview>


### Start and end dates

Subscription settings are defined for the form, not individual products.

Start and end dates must follow the pattern described in FoxyCart documentation:
https://wiki.foxycart.com/v/2.0/products#subscription_product_options

You may set specific dates with the format `YYYYMMDD`, or relative dates using a number with a letter (d for day, w for week, m for month and y for year) appended to it.
Check out the documentation for more details.

<Preview>
  <Story name="Start and End Dates" >
    {html`
    <foxy-order-form frequencyOptions='["1d", "1w", ".5m", "1m"]'
                    currency="usd"
                    sub_startdate="20200505"
                    sub_enddate="20210505" >
      <foxy-item
        name="Pup Dog Food"
        price="69.99"
        sub_frequency="1m"
        >
        High quality nutritious food for you pet
      </foxy-item>
    </foxy-order-form>
    `}
  </Story>
</Preview>
